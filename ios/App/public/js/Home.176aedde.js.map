{"version":3,"sources":["webpack:///./src/views/user/Home.vue","webpack:///./src/components/user/HomeSlidingCafeCards.vue","webpack:///./src/components/user/HomeSlidingCafeCards.vue?a5a3","webpack:///./src/views/user/Home.vue?c6ac","webpack:///./src/views/user/Home.vue?ba93","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["hasSearchFilter","mainHeading","notificationIcon","notificationsOutline","switchToSearch","class","slot","refresh","$event","pulling-text","refreshing-spinner","refreshing-text","title","options","slideOpts","ref","cafes","closestToUserCafes","slice","openModal","currentlyAvailableCafes","is-open","isModalOpen","css-class","backdrop-dismiss","swipe-to-close","cafe","modalCafe","hideModal","key","id","$emit","name","components","CafeCard","props","type","Object","default","emits","setup","render","IonContent","IonPage","IonModal","IonSlides","IonSlide","IonRefresher","IonRefresherContent","UserHeader","FilterCategoryHeading","HomeSlidingCafeCards","ShortCafeModal","beforeRouteEnter","to","keys","query","length","path","hash","ionViewWillEnter","document","querySelector","this","slides","router","initialSlide","speed","slidesPerView","CafeService","getCafeCardsChunkInfo","then","response","data","catch","error","alert","state","value","modal","style","height","e","push","searchTerm","target","event","Promise","all","complete","$","isObject","isArray","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","SPECIES","nativeSlice","max","Math","proto","forced","start","end","Constructor","result","n","O","k","fin","undefined","constructor","Array","prototype","call"],"mappings":"6kBACE,eAqEW,Q,wBApET,iBAKE,CALF,eAKE,GAJGA,iBAAiB,EACjBC,YAAa,0BACbC,iBAAkB,EAAAC,qBAClB,qBAAoB,EAAAC,gB,oDAGzB,eA4Dc,GA5DDC,MAAM,eAAa,C,wBAC9B,iBAOgB,CAPhB,eAOgB,GAPDC,KAAK,QAAS,aAAU,+BAAE,EAAAC,QAAQC,KAASH,MAAM,e,yBAC9D,iBAKwB,CALxB,eAKwB,GAJpBI,eAAa,wBACbC,qBAAmB,QACnBC,kBAAgB,uB,MAKtB,eAA8D,GAAvCN,MAAM,OAAQO,MAAO,kBAC5C,eAea,GAfAC,QAAS,EAAAC,UAAWC,IAAI,U,yBACnC,iBAMY,CANZ,eAMY,Q,wBALV,iBAIE,CAJF,eAIE,GAHGC,MAAO,EAAAA,MAAMC,mBAAmBC,MAAK,KACrC,gBAAa,+BAAE,EAAAC,UAAUX,GAAM,KAChCH,MAAM,Q,4BAGZ,eAMY,Q,wBALV,iBAIE,CAJF,eAIE,GAHGW,MAAO,EAAAA,MAAMC,mBAAmBC,MAAK,KACrC,gBAAa,+BAAE,EAAAC,UAAUX,GAAM,KAChCH,MAAM,Q,oDAKd,eAAkE,GAA3CA,MAAM,OAAQO,MAAO,sBAC5C,eAea,GAfAC,QAAS,EAAAC,WAAS,C,wBAC7B,iBAMY,CANZ,eAMY,Q,wBALV,iBAIE,CAJF,eAIE,GAHGE,MAAO,EAAAA,MAAMI,wBAAwBF,MAAK,KAC1C,gBAAa,+BAAE,EAAAC,UAAUX,GAAM,KAChCH,MAAM,Q,4BAGZ,eAMY,Q,wBALV,iBAIE,CAJF,eAIE,GAHGW,MAAO,EAAAA,MAAMI,wBAAwBF,MAAK,KAC1C,gBAAa,+BAAE,EAAAC,UAAUX,GAAM,KAChCH,MAAM,Q,oDAMd,eAYY,GAXPgB,UAAS,EAAAC,YACVC,YAAU,eACT,aAAU,wBAAE,EAAAJ,WAAS,KACrBK,oBAAkB,EAClBC,kBAAgB,G,yBAEnB,iBAIE,CAJF,eAIE,GAHGC,KAAM,EAAAC,UACN,wBAAqB,+BAAE,EAAAR,WAAS,KAChC,iBAAgB,EAAAS,W,2LCjEtBvB,MAAM,U,iFAAX,eAQM,MARN,EAQM,E,mBAPJ,eAME,2BALiB,EAAAW,OAAK,SAAbU,G,wBADX,eAME,GAJGG,IAAKH,EAAKI,GACXzB,MAAM,OACLqB,KAAMA,EACN,QAAK,mBAAE,EAAAK,MAAK,gBAAkBL,K,sDAUxB,iBAAgB,CAC7BM,KAAM,uBACNC,WAAY,CACVC,WAAA,MAEFC,MAAO,CACLnB,MAAO,CACLoB,KAAMC,OACNC,QAAS,OAGbC,MAAO,CAAC,iBACRC,MAZ6B,WAe3B,MAAO,MC7BX,EAAOC,OAAS,EAED,Q,wBF6FA,iBAAgB,CAC7BT,KAAM,OACNC,WAAY,CACVS,WAAA,OACAC,QAAA,OACAC,SAAA,OACAC,UAAA,OACAC,SAAA,OACAC,aAAA,OACAC,oBAAA,OACAC,aAAA,KACAC,wBAAA,KACAC,uBACAC,iBAAA,MAEFC,iBAf6B,SAeZC,GAEf,GAAGjB,OAAOkB,KAAKD,EAAGE,OAAOC,OACvB,MAAO,CAAEC,KAAMJ,EAAGI,KAAMF,MAAO,GAAIG,KAAML,EAAGK,OAGhDC,iBArB6B,WAuB3BC,SAASC,cAAc,cAAcjD,QAAUkD,KAAKjD,WAEtD0B,MAzB6B,WA2B3B,IAAMwB,EAAS,eAAI,MAGbC,EAAS,iBAGTnD,EAAY,CAChBoD,aAAc,EACdC,MAAO,IACPC,cAAe,KAGbpD,EAAQ,eAAS,CACnBI,wBAAyB,GACzBH,mBAAoB,KAGhBK,EAAc,gBAAI,GAElBK,EAAY,eAAI,IAItB,gBAAU,WACR,IAAMqC,EAASH,SAASC,cAAc,cACtC,gBAAS,WACPE,EAAOnD,QAAUC,QAIrBuD,EAAA,KAAYC,sBAAsB,EAAG,EAAG,GAAI,MAAM,GACtCC,MAAK,SAACC,GACLxD,EAAMI,wBAA0BoD,EAASC,QAE1CC,OAAM,SAACC,GAAD,OAAWC,MAAMD,MAGnCN,EAAA,KAAYC,sBAAsB,EAAG,EAAG,GAAI,QAAQ,GACxCC,MAAK,SAACC,GACLxD,EAAMC,mBAAqBuD,EAASC,QAErCC,OAAM,SAACC,GAAD,OAAWC,MAAMD,MAGnC,IAAMxD,EAAY,WAAwB,IAAvBO,EAAuB,uDAAhB,KAAMmD,EAAU,uCACxChB,SAASC,cAAc,cAAcjD,QAAUC,EAE5CY,IACDC,EAAUmD,MAAQpD,GAEpBJ,EAAYwD,MAAQD,GAEhBjD,EAAY,WAChB,IAAMmD,EAAQlB,SAASC,cAAc,kCAErCiB,EAAMC,MAAMC,OAAS,GAEjB7E,EAAiB,SAAC8E,GACtBjB,EAAOkB,KAAK,CAAEzB,KAAM,SAAUF,MAAO,CAAE4B,WAAYF,EAAEG,OAAOP,SAE5DI,EAAEG,OAAOP,MAAQ,MAEbvE,EAAU,SAAC+E,GAGfC,QAAQC,IAAI,CACVnB,EAAA,KAAYC,sBAAsB,EAAG,EAAG,GAAI,QAAQ,GACxCC,MAAK,SAACC,GACLxD,EAAMI,wBAA0BoD,EAASC,QAE1CC,OAAM,SAACC,GAAD,OAAWC,MAAMD,MAEnCN,EAAA,KAAYC,sBAAsB,EAAG,EAAG,GAAI,MAAM,GACtCC,MAAK,SAACC,GACLxD,EAAMC,mBAAqBuD,EAASC,QAErCC,OAAM,SAACC,GAAD,OAAWC,MAAMD,QAE7BJ,MAAK,WACJe,EAAMD,OAAOI,cAEdf,OAAM,SAACC,GACNC,MAAMD,GACNW,EAAMD,OAAOI,eAMxB,MAAO,CACLzB,SAGAlD,YACAE,QACAM,cACAK,YAGAR,YACAS,YACAxB,iBACAG,UAKAJ,qBAAA,W,UGnON,EAAOsC,OAASA,EAED,gB,kCCPf,W,kCCCA,IAAIiD,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAClBC,EAAkB,EAAQ,QAC1BC,EAAW,EAAQ,QACnBC,EAAkB,EAAQ,QAC1BC,EAAiB,EAAQ,QACzBC,EAAkB,EAAQ,QAC1BC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,SAEnDE,EAAUH,EAAgB,WAC1BI,EAAc,GAAGnF,MACjBoF,EAAMC,KAAKD,IAKfZ,EAAE,CAAEL,OAAQ,QAASmB,OAAO,EAAMC,QAASN,GAAuB,CAChEjF,MAAO,SAAewF,EAAOC,GAC3B,IAKIC,EAAaC,EAAQC,EALrBC,EAAIhB,EAAgBhC,MACpBN,EAASqC,EAASiB,EAAEtD,QACpBuD,EAAInB,EAAgBa,EAAOjD,GAC3BwD,EAAMpB,OAAwBqB,IAARP,EAAoBlD,EAASkD,EAAKlD,GAG5D,GAAImC,EAAQmB,KACVH,EAAcG,EAAEI,YAEU,mBAAfP,GAA8BA,IAAgBQ,QAASxB,EAAQgB,EAAYS,WAE3E1B,EAASiB,KAClBA,EAAcA,EAAYR,GACN,OAAhBQ,IAAsBA,OAAcM,IAHxCN,OAAcM,EAKZN,IAAgBQ,YAAyBF,IAAhBN,GAC3B,OAAOP,EAAYiB,KAAKP,EAAGC,EAAGC,GAIlC,IADAJ,EAAS,SAAqBK,IAAhBN,EAA4BQ,MAAQR,GAAaN,EAAIW,EAAMD,EAAG,IACvEF,EAAI,EAAGE,EAAIC,EAAKD,IAAKF,IAASE,KAAKD,GAAGf,EAAea,EAAQC,EAAGC,EAAEC,IAEvE,OADAH,EAAOpD,OAASqD,EACTD","file":"js/Home.176aedde.js","sourcesContent":["<template>\r\n  <ion-page>\r\n    <UserHeader\r\n        :hasSearchFilter=\"true\"\r\n        :mainHeading=\"'Pronadji slobodno mesto'\"\r\n        :notificationIcon=\"notificationsOutline\"\r\n        @searchEnterPressed=\"switchToSearch\"\r\n    />\r\n\r\n    <ion-content class=\"ion-padding\">\r\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"refresh($event)\" class=\"transparent\">\r\n        <ion-refresher-content\r\n            pulling-text=\"Povuci te da osvezite\"\r\n            refreshing-spinner=\"lines\"\r\n            refreshing-text=\"Osvezava se...\"\r\n        >\r\n        </ion-refresher-content>\r\n      </ion-refresher>\r\n\r\n      <FilterCategoryHeading class=\"mb-2\" :title=\"'Najblizi vama'\"/>\r\n      <ion-slides :options=\"slideOpts\" ref=\"slides\">\r\n        <ion-slide>\r\n          <HomeSlidingCafeCards\r\n              :cafes=\"cafes.closestToUserCafes.slice(0, 2)\"\r\n              @openCafeModal=\"openModal($event, true)\"\r\n              class=\"pr-3\"\r\n          />\r\n        </ion-slide>\r\n        <ion-slide>\r\n          <HomeSlidingCafeCards\r\n              :cafes=\"cafes.closestToUserCafes.slice(2, 4)\"\r\n              @openCafeModal=\"openModal($event, true)\"\r\n              class=\"pr-3\"\r\n          />\r\n        </ion-slide>\r\n      </ion-slides>\r\n\r\n      <FilterCategoryHeading class=\"mb-2\" :title=\"'Trenutno slobodni'\"/>\r\n      <ion-slides :options=\"slideOpts\">\r\n        <ion-slide>\r\n          <HomeSlidingCafeCards\r\n              :cafes=\"cafes.currentlyAvailableCafes.slice(0, 2)\"\r\n              @openCafeModal=\"openModal($event, true)\"\r\n              class=\"pr-3\"\r\n          />\r\n        </ion-slide>\r\n        <ion-slide>\r\n          <HomeSlidingCafeCards\r\n              :cafes=\"cafes.currentlyAvailableCafes.slice(2, 4)\"\r\n              @openCafeModal=\"openModal($event, true)\"\r\n              class=\"pr-3\"\r\n          />\r\n        </ion-slide>\r\n      </ion-slides>\r\n\r\n\r\n      <ion-modal\r\n          :is-open=\"isModalOpen\"\r\n          css-class=\"custom-modal\"\r\n          @didDismiss=\"openModal(false);\"\r\n          :backdrop-dismiss=\"true\"\r\n          :swipe-to-close=\"true\"\r\n      >\r\n        <ShortCafeModal\r\n            :cafe=\"modalCafe\"\r\n            @dismissShortCafeModal=\"openModal(false)\"\r\n            @subModalOpened=\"hideModal\"\r\n        />\r\n      </ion-modal>\r\n    </ion-content>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, reactive, onMounted, nextTick } from 'vue';\r\n\r\nimport { useRouter } from 'vue-router';\r\n\r\nimport {\r\n  IonContent,\r\n  IonPage,\r\n  IonModal,\r\n  IonSlides,\r\n  IonSlide,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n} from '@ionic/vue';\r\n\r\nimport CafeService from '@/services/CafeService';\r\n\r\nimport UserHeader            from '@/components/user/UserHeader';\r\nimport FilterCategoryHeading from '@/components/user/FilterCategoryHeading';\r\nimport HomeSlidingCafeCards  from '@/components/user/HomeSlidingCafeCards';\r\nimport ShortCafeModal        from '@/components/user/ShortCafeModal';\r\n\r\nimport { notificationsOutline } from 'ionicons/icons';\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'Home',\r\n  components: {\r\n    IonContent,\r\n    IonPage,\r\n    IonModal,\r\n    IonSlides,\r\n    IonSlide,\r\n    IonRefresher,\r\n    IonRefresherContent,\r\n    UserHeader,\r\n    FilterCategoryHeading,\r\n    HomeSlidingCafeCards,\r\n    ShortCafeModal,\r\n  },\r\n  beforeRouteEnter(to) {\r\n    // Before entering route remove query params\r\n    if(Object.keys(to.query).length) {\r\n      return { path: to.path, query: {}, hash: to.hash };\r\n    }\r\n  },\r\n  ionViewWillEnter() {\r\n    // Before entering view style slides according to options\r\n    document.querySelector(\"ion-slides\").options = this.slideOpts;\r\n  },\r\n  setup() {\r\n    /* Component references */\r\n    const slides = ref(null);\r\n\r\n    /* Global properties */\r\n    const router = useRouter();\r\n\r\n    /* Component properties */\r\n    const slideOpts = {\r\n      initialSlide: 0,\r\n      speed: 300,\r\n      slidesPerView: 1.1,\r\n    };\r\n    // Cafes closest to user\r\n    let cafes = reactive({\r\n      currentlyAvailableCafes: [],\r\n      closestToUserCafes: [],\r\n    });\r\n    // Showing/Hiding modal based on this property value\r\n    const isModalOpen = ref(false);\r\n    // Cafe which information is sent to modal\r\n    const modalCafe = ref({});\r\n\r\n    /* Lifecycle hooks */\r\n    // Without this on android options are not passed to swiper\r\n    onMounted(() => {\r\n      const slides = document.querySelector(\"ion-slides\");\r\n      nextTick(() => {\r\n        slides.options = slideOpts;\r\n      });\r\n    });\r\n    //*Before mounting fetching initial 4 cafes to show in currently free cafes\r\n    CafeService.getCafeCardsChunkInfo(0, 4, '', 'id', true)\r\n               .then((response) => {\r\n                 cafes.currentlyAvailableCafes = response.data;\r\n               })\r\n               .catch((error) => alert(error));\r\n\r\n    //*Before mounting fetching initial 4 cafes to show closest to user\r\n    CafeService.getCafeCardsChunkInfo(0, 4, '', 'name', true)\r\n               .then((response) => {\r\n                 cafes.closestToUserCafes = response.data;\r\n               })\r\n               .catch((error) => alert(error));\r\n\r\n    /* Event handlers */\r\n    const openModal = (cafe = null, state) => {\r\n      document.querySelector(\"ion-slides\").options = slideOpts;\r\n\r\n      if(cafe) {\r\n        modalCafe.value = cafe;\r\n      }\r\n      isModalOpen.value = state;\r\n    };\r\n    const hideModal = () => {\r\n      const modal = document.querySelector('.custom-modal > .modal-wrapper');\r\n\r\n      modal.style.height = 0;\r\n    };\r\n    const switchToSearch = (e) => {\r\n      router.push({ path: 'search', query: { searchTerm: e.target.value } });\r\n      //Clearing search input after leaving page\r\n      e.target.value = null;\r\n    };\r\n    const refresh = (event) => {\r\n      // Only after both cafe arrays have been updated then complete refresher\r\n      // Fetching 4 cafes in each category with new live data\r\n      Promise.all([\r\n        CafeService.getCafeCardsChunkInfo(0, 4, '', 'name', true)\r\n                   .then((response) => {\r\n                     cafes.currentlyAvailableCafes = response.data;\r\n                   })\r\n                   .catch((error) => alert(error)),\r\n\r\n        CafeService.getCafeCardsChunkInfo(0, 4, '', 'id', true)\r\n                   .then((response) => {\r\n                     cafes.closestToUserCafes = response.data;\r\n                   })\r\n                   .catch((error) => alert(error)),\r\n      ])\r\n             .then(() => {\r\n               event.target.complete();\r\n             })\r\n             .catch((error) => {\r\n               alert(error);\r\n               event.target.complete();\r\n             });\r\n\r\n\r\n    };\r\n\r\n    return {\r\n      slides,\r\n\r\n      /* Component properties */\r\n      slideOpts,\r\n      cafes,\r\n      isModalOpen,\r\n      modalCafe,\r\n\r\n      /* Event handlers */\r\n      openModal,\r\n      hideModal,\r\n      switchToSearch,\r\n      refresh,\r\n\r\n      /* Methods */\r\n\r\n      /* Icons from */\r\n      notificationsOutline,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\nion-refresher {\r\n  background: #F6F7FB !important;\r\n}\r\n\r\nion-refresher-content {\r\n  margin-top: 3px !important;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"w-full\">\r\n    <CafeCard\r\n        v-for=\"cafe in cafes\"\r\n        :key=\"cafe.id\"\r\n        class=\"mb-5\"\r\n        :cafe=\"cafe\"\r\n        @click=\"$emit('openCafeModal', cafe)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nimport CafeCard from '@/components/user/CafeCard';\r\n\r\nexport default defineComponent({\r\n  name: \"HomeSlidingCafeCards\",\r\n  components: {\r\n    CafeCard,\r\n  },\r\n  props: {\r\n    cafes: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n  },\r\n  emits: ['openCafeModal'],\r\n  setup() {\r\n\r\n\r\n    return {\r\n      /* Component properties */\r\n\r\n      /* Computed properties */\r\n\r\n      /* Event handlers */\r\n\r\n\r\n    };\r\n  },\r\n});\r\n</script>","import { render } from \"./HomeSlidingCafeCards.vue?vue&type=template&id=e5b27cf6\"\nimport script from \"./HomeSlidingCafeCards.vue?vue&type=script&lang=js\"\nexport * from \"./HomeSlidingCafeCards.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=4df5efee\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=4df5efee&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=4df5efee&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}