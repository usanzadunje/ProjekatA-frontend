(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{1547:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const r=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(e,t)=>{n.platforms.set(e,t)},o=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))};return n.addPlatform=r,n.setPlatform=o,n},o=e=>e.CapacitorPlatforms=r(e),i=o("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{});i.addPlatform,i.setPlatform;var a;(function(e){e["Unimplemented"]="UNIMPLEMENTED",e["Unavailable"]="UNAVAILABLE"})(a||(a={}));class s extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const c=e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"},u=e=>{var t,n,r,o,i;const u=e.Capacitor||{},l=u.Plugins=u.Plugins||{},d=e.CapacitorPlatforms,f=()=>c(e),m=(null===(t=null===d||void 0===d?void 0:d.currentPlatform)||void 0===t?void 0:t.getPlatform)||f,b=()=>"web"!==c(e),p=(null===(n=null===d||void 0===d?void 0:d.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||b,v=e=>{const t=x.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(m()))||!!w(e)},h=(null===(r=null===d||void 0===d?void 0:d.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||v,g=e=>{var t;return null===(t=u.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},w=(null===(o=null===d||void 0===d?void 0:d.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||g,O=t=>e.console.error(t),j=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),x=new Map,y=(e,t={})=>{const n=x.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const r=m(),o=w(e);let i;const c=async()=>(!i&&r in t&&(i=i="function"===typeof t[r]?await t[r]():t[r]),i),d=(t,n)=>{var i,c;if(!o){if(t)return null===(c=t[n])||void 0===c?void 0:c.bind(t);throw new s(`"${e}" plugin is not implemented on ${r}`,a.Unimplemented)}{const r=null===o||void 0===o?void 0:o.methods.find(e=>n===e.name);if(r)return"promise"===r.rtype?t=>u.nativePromise(e,n.toString(),t):(t,r)=>u.nativeCallback(e,n.toString(),t,r);if(t)return null===(i=t[n])||void 0===i?void 0:i.bind(t)}},f=t=>{let n;const o=(...o)=>{const i=c().then(i=>{const c=d(i,t);if(c){const e=c(...o);return n=null===e||void 0===e?void 0:e.remove,e}throw new s(`"${e}.${t}()" is not implemented on ${r}`,a.Unimplemented)});return"addListener"===t&&(i.remove=async()=>n()),i};return o.toString=()=>t.toString()+"() { [capacitor code] }",Object.defineProperty(o,"name",{value:t,writable:!1,configurable:!1}),o},b=f("addListener"),p=f("removeListener"),v=(e,t)=>{const n=b({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},o=new Promise(e=>n.then(()=>e({remove:r})));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},o},h=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"addListener":return o?v:b;case"removeListener":return p;default:return f(t)}}});return l[e]=h,x.set(e,{name:e,proxy:h,platforms:new Set([...Object.keys(t),...o?[r]:[]])}),h},P=(null===(i=null===d||void 0===d?void 0:d.currentPlatform)||void 0===i?void 0:i.registerPlugin)||y;return u.convertFileSrc||(u.convertFileSrc=e=>e),u.getPlatform=m,u.handleError=O,u.isNativePlatform=p,u.isPluginAvailable=h,u.pluginMethodNoop=j,u.registerPlugin=P,u.Exception=s,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},l=e=>e.Capacitor=u(e),d=l("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}),f=d.registerPlugin;d.Plugins;class m{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){const n=this.listeners[e];n||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const o=async()=>this.removeListener(e,t),i=Promise.resolve({remove:o});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach(e=>e(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new d.Exception(e,a.Unimplemented)}unavailable(e="not available"){return new d.Exception(e,a.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}}).call(this,n("c8ba"))},"2fa3":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));n("b0c0"),n("d3b7");var r=n("a18c");function o(e){var t={apiError:["API Error, please try again."]};return 404===e.response.status&&"notFound"!==r["a"].currentRoute.name&&r["a"].push({path:"/404"}),e.response.data&&e.response.data.errors?e.response.data.errors:t}function i(e){return new Promise((function(t,n){e<1&&n("Invalid time in milliseconds passed."),setTimeout((function(){t()}),e)}))}},5326:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=Object(r["L"])("data-v-03029986");Object(r["u"])("data-v-03029986");var i={class:"relative background-image-container bg"},a=Object(r["h"])("div",{class:"absolute logo-position-login w-full"},[Object(r["h"])("h1",{class:"text-center uppercase main-heading"},"Caffe"),Object(r["h"])("h1",{class:"text-center lowercase main-heading-smaller"},"finder")],-1),s={class:"absolute content-position-login w-full mb-4"},c=Object(r["h"])("h2",{class:"text-center secondary-heading"},"Prijavi se",-1);Object(r["s"])();var u=o((function(e,t,n,u,l,d){var f=Object(r["z"])("LoginForm"),m=Object(r["z"])("ion-content"),b=Object(r["z"])("ion-page");return Object(r["r"])(),Object(r["e"])(b,null,{default:o((function(){return[Object(r["h"])(m,null,{default:o((function(){return[Object(r["h"])("div",i,[a,Object(r["h"])("div",s,[c,Object(r["h"])(f,{class:"mt-8"})])])]})),_:1})]})),_:1})})),l=n("d867"),d={class:"px-8"},f={class:"relative flex justify-between mt-3.5 px-4 utility-text"},m={class:"relative"},b=Object(r["g"])("Zapamti me"),p=Object(r["h"])("div",{class:"w-32 absolute top-1/2 right-0 transform -translate-y-1/2"},[Object(r["h"])("a",{href:"/forgot-password"},"Zaboravljena lozinka?")],-1),v={class:"mt-6"},h=Object(r["g"])(" Prijavi se "),g=Object(r["g"])(" Registruj se ");function w(e,t,n,o,i,a){var s=Object(r["z"])("ion-icon"),c=Object(r["z"])("ion-input"),u=Object(r["z"])("ion-item"),l=Object(r["z"])("ion-checkbox"),w=Object(r["z"])("ion-text"),O=Object(r["z"])("SocialIcons"),j=Object(r["z"])("ion-button");return Object(r["r"])(),Object(r["e"])("div",d,[Object(r["h"])(u,{lines:"none",class:["flex rounded-2xl h-11 auth-input-background",{"error-border":e.errorNames.hasOwnProperty("email")}]},{default:Object(r["H"])((function(){return[Object(r["h"])(s,{icon:e.mailOutline,class:"mr-2 text-xl text-gray-500"},null,8,["icon"]),Object(r["h"])(c,{ref:"emailInput",modelValue:e.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.email=t}),modelModifiers:{lazy:!0},onKeyup:t[2]||(t[2]=Object(r["J"])((function(t){var n;return null===(n=e.passwordInput.$el)||void 0===n?void 0:n.setFocus()}),["enter"])),autocomplete:"email",type:"email",inputmode:"email",debounce:"600",placeholder:"marko.markovic@gmail.com",autofocus:"",required:""},null,8,["modelValue"])]})),_:1},8,["class"]),Object(r["h"])(u,{lines:"none",class:["flex rounded-2xl h-11 mt-3.5 auth-input-background",{"error-border":e.errorNames.hasOwnProperty("email")}]},{default:Object(r["H"])((function(){return[Object(r["h"])(s,{icon:e.lockOpenOutline,class:"mr-2 text-xl text-gray-500"},null,8,["icon"]),Object(r["h"])(c,{ref:"passwordInput",modelValue:e.user.password,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.user.password=t}),onKeyup:Object(r["J"])(e.login,["enter"]),inputmode:"password",type:e.showPassword?"text":"password",debounce:"1",placeholder:"••••••••",required:""},null,8,["modelValue","onKeyup","type"]),Object(r["h"])(s,{icon:e.showPassword?e.eyeOutline:e.eyeOffOutline,onClick:e.togglePasswordShow,class:"text-xl text-gray-500"},null,8,["icon","onClick"])]})),_:1},8,["class"]),Object(r["h"])("div",f,[Object(r["h"])("div",m,[Object(r["h"])(l,{modelValue:e.user.remember,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.user.remember=t}),mode:"md"},null,8,["modelValue"]),Object(r["h"])(w,{class:"ml-2 w-16 absolute top-1/2 transform -translate-y-1/2"},{default:Object(r["H"])((function(){return[b]})),_:1})]),p]),Object(r["h"])(O,{class:"mt-7"}),Object(r["h"])("div",v,[Object(r["h"])(j,{size:"large",expand:"block",class:"auth-button-size auth-button-border-radius uppercase button-text-white",onClick:e.login},{default:Object(r["H"])((function(){return[h]})),_:1},8,["onClick"]),Object(r["h"])(j,{fill:"clear",routerLink:"/register",size:"large",expand:"block",class:"auth-button-size auth-button-border-radius uppercase button-text-black mt-4"},{default:Object(r["H"])((function(){return[g]})),_:1})])])}var O=n("1da1"),j=(n("b64b"),n("96cf"),n("6c02")),x=n("4360"),y=n("2fa3"),P=n("b012"),k=n("ffee"),L=n("a09f"),I=n("ff79"),E=Object(r["i"])({name:"LoginForm",components:{IonItem:l["m"],IonInput:l["l"],IonIcon:l["i"],IonText:l["E"],IonButton:l["b"],IonCheckbox:l["d"],SocialIcons:k["a"]},setup:function(){var e=Object(j["i"])(),t=Object(r["v"])({}),n=Object(r["w"])(!1),o=Object(r["w"])({}),i=Object(r["w"])(null),a=Object(r["w"])(null),s=Object(L["a"])(),c=s.showErrorToast,u=s.showSuccessToast,l=function(){P["b"].login(t).then(Object(O["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x["a"].dispatch("auth/getAuthUser");case 2:return r=x["a"].getters["auth/isStaff"]?{name:"staff.home"}:{name:"home"},t.email="",t.password="",n.next=7,e.push(r);case 7:return n.next=9,u("Success logged in!");case 9:case"end":return n.stop()}}),n)})))).catch(function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.value=Object(y["a"])(t),e.next=3,c(t);case 3:return e.next=5,Object(y["b"])(900*Object.keys(o.value).length);case 5:o.value={};case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},d=function(){n.value=!n.value};return{user:t,showPassword:n,errorNames:o,passwordInput:i,emailInput:a,login:l,togglePasswordShow:d,mailOutline:I["v"],lockOpenOutline:I["s"],eyeOutline:I["m"],eyeOffOutline:I["l"]}}});E.render=w;var z=E,C=Object(r["i"])({name:"Login",components:{LoginForm:z,IonPage:l["s"],IonContent:l["f"]}});n("de9a");C.render=u,C.__scopeId="data-v-03029986";t["default"]=C},5590:function(e,t,n){},"78c1":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=Object(r["L"])("data-v-15d7b6d9"),i=o((function(e,t,n,i,a,s){var c=Object(r["z"])("ion-content"),u=Object(r["z"])("ion-page");return Object(r["r"])(),Object(r["e"])(u,null,{default:o((function(){return[Object(r["h"])(c,{fullscreen:!0,"scroll-events":!0})]})),_:1})})),a=n("d867"),s={components:{IonContent:a["f"],IonPage:a["s"]},setup:function(){return{}}};s.render=i,s.__scopeId="data-v-15d7b6d9";t["default"]=s},a09f:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("1da1"),o=(n("96cf"),n("b64b"),n("7a23")),i=n("d867"),a=n("2fa3");function s(){var e=Object(o["w"])({}),t=Object(o["c"])((function(){return e.value?Object.keys(e.value):null})),n=function(t){return e.value[t]},s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["L"].create({duration:1500,position:"top",message:t,cssClass:"success-toast"});case 2:return n=e.sent,e.abrupt("return",n.present());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var o=Object(r["a"])(regeneratorRuntime.mark((function r(o){var s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.value=Object(a["a"])(o),s=0;case 2:if(!(s<t.value.length)){r.next=12;break}return r.next=5,i["L"].create({duration:1500,position:"top",message:n(t.value[s]),cssClass:"error-toast"});case 5:return c=r.sent,c.style.top="".concat(55*s,"px"),r.next=9,c.present();case 9:s++,r.next=2;break;case 12:case"end":return r.stop()}}),r)})));return function(e){return o.apply(this,arguments)}}();return{showSuccessToast:s,showErrorToast:c}}},de9a:function(e,t,n){"use strict";n("5590")},ffee:function(e,t,n){"use strict";var r=n("7a23"),o={class:"flex justify-around px-6"};function i(e,t,n,i,a,s){var c=Object(r["z"])("ion-icon");return Object(r["r"])(),Object(r["e"])("div",o,[Object(r["h"])("div",{onClick:t[1]||(t[1]=function(t){return e.login("facebook")}),class:"bg-gray-100 rounded-full text-center social-circle-size"},[Object(r["h"])(c,{icon:e.logoFacebook,class:"text-blue-400"},null,8,["icon"])]),Object(r["h"])("div",{onClick:t[2]||(t[2]=function(t){return e.login("google")}),class:"bg-gray-100 rounded-full text-center social-circle-size"},[Object(r["h"])(c,{icon:e.logoGoogle},null,8,["icon"])])])}var a=n("1da1"),s=(n("96cf"),n("6c02")),c=n("4360"),u=n("d867"),l=n("b012"),d=(n("ac1f"),n("1276"),n("b0c0"),n("1547"));const f=Object(d["c"])("GoogleAuth",{web:()=>n.e("chunk-7f92a140").then(n.bind(null,"9e96")).then(e=>new e.GoogleAuthWeb)}),m=Object(d["c"])("FacebookLogin",{web:()=>n.e("chunk-2d0c45c6").then(n.bind(null,"3b01")).then(e=>new e.FacebookLoginWeb)});var b={getUserFromProvider:function(e){return"google"===e?p():"facebook"===e?v():void 0}},p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.signIn();case 2:return t=e.sent,e.abrupt("return",{fname:t.givenName,lname:t.familyName,email:t.email,avatar:t.imageUrl,provider_id:t.id});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.login({permissions:["email"]});case 2:return e.next=4,m.getProfile({fields:["email","name"]});case 4:return t=e.sent,e.abrupt("return",{fname:t.name.split(" ")[0],lname:t.name.split(" ")[1],email:t.email,avatar:null,provider_id:t.id});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=n("ff79"),g=Object(r["i"])({name:"SocialIcons",components:{IonIcon:u["i"]},mounted:function(){f.init()},setup:function(){var e=Object(s["i"])(),t=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.getUserFromProvider(n);case 2:r=t.sent,l["b"].authenticateSocial(r).then(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].dispatch("auth/getAuthUser");case 2:return t.next=4,e.push({name:"home"});case 4:case"end":return t.stop()}}),t)})))).catch((function(e){alert(JSON.stringify(e))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{login:t,logoFacebook:h["t"],logoGoogle:h["u"]}}});g.render=i;t["a"]=g}}]);
//# sourceMappingURL=Login.39bb8755.js.map