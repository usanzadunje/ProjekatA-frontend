(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"0cab":function(e,t,n){"use strict";n.r(t);var i=n("7a23"),a=Object(i["L"])("data-v-df06d4da");Object(i["u"])("data-v-df06d4da");var o={id:"header",class:"pull-transition"};Object(i["s"])();var c=a((function(e,t,n,c,l,r){var u=Object(i["z"])("SlidingFilter"),s=Object(i["z"])("UserHeader"),d=Object(i["z"])("InfiniteScroll"),f=Object(i["z"])("ShortCafeModal"),b=Object(i["z"])("ion-modal"),h=Object(i["z"])("ion-content"),O=Object(i["z"])("ion-page");return Object(i["r"])(),Object(i["e"])(O,null,{default:a((function(){return[Object(i["h"])("div",o,[Object(i["h"])(s,{hasSearchFilter:!1,mainHeading:"Pretraga",notificationIcon:e.notificationsOffOutline,searchTerm:e.cafeSearchString,onSearchFilterChanged:e.searchFilterChanged},{default:a((function(){return[Object(i["h"])(u,{hasTitle:!0,onSortHasChanged:e.sortHasChanged},null,8,["onSortHasChanged"])]})),_:1},8,["notificationIcon","searchTerm","onSearchFilterChanged"])]),Object(i["h"])(h,{ref:"content","scroll-events":!0,onIonScroll:t[4]||(t[4]=function(t){return e.pullAnimation()}),class:"ion-padding"},{default:a((function(){return[Object(i["h"])(d,{cafeSearchString:e.cafeSearchString,sortBy:e.sortBy,onScrollToTop:e.scrollToTop,onOpenCafeModal:t[1]||(t[1]=function(t){return e.openModal(t,!0)})},null,8,["cafeSearchString","sortBy","onScrollToTop"]),Object(i["h"])(b,{"is-open":e.isModalOpen,"css-class":"custom-modal",onOnDidDismiss:t[3]||(t[3]=function(t){e.openModal(!1)}),"backdrop-dismiss":!0,"swipe-to-close":!0},{default:a((function(){return[Object(i["h"])(f,{cafe:e.modalCafe,onDismissShortCafeModal:t[2]||(t[2]=function(t){return e.openModal(!1)}),onSubModalOpened:e.hideModal},null,8,["cafe","onSubModalOpened"])]})),_:1},8,["is-open"])]})),_:1},512)]})),_:1})})),l=n("1da1"),r=(n("96cf"),n("d867")),u=n("1990"),s=n("9ef8");function d(e,t,n,a,o,c){var l=Object(i["z"])("FilterCategoryHeading"),r=Object(i["z"])("CafeCard"),u=Object(i["z"])("ion-infinite-scroll-content"),s=Object(i["z"])("ion-infinite-scroll");return Object(i["r"])(),Object(i["e"])(i["a"],null,[Object(i["h"])("div",null,[Object(i["h"])(l,{class:"mb-2"}),(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(e.cafes,(function(t){return Object(i["r"])(),Object(i["e"])("div",{key:t.id,class:"mb-5"},[Object(i["h"])(r,{cafe:t,onClick:function(n){return e.openCafeModal(t.id)}},null,8,["cafe","onClick"])])})),128))]),Object(i["h"])(s,{onIonInfinite:t[1]||(t[1]=function(t){return e.loadData(t)}),threshold:"100px",id:"infinite-scroll",disabled:e.isInfiniteScrollDisabled},{default:Object(i["H"])((function(){return[Object(i["h"])(u,{class:"mt-6","loading-spinner":"lines","loading-text":"Ucitavanje rezultata..."})]})),_:1},8,["disabled"])],64)}n("99af");var f=n("5aaa"),b=n("0f94"),h=n("8a67"),O=Object(i["i"])({name:"InfiniteScroll",components:{IonInfiniteScroll:r["j"],IonInfiniteScrollContent:r["k"],FilterCategoryHeading:b["a"],CafeCard:h["a"]},props:{cafeSearchString:{type:String,default:""},sortBy:{type:String,default:""}},emits:["scrollToTop","openCafeModal"],setup:function(e,t){var n=t.emit,a=Object(i["w"])([]),o=null,c=Object(i["D"])(e),l=c.cafeSearchString,r=Object(i["D"])(e),u=r.sortBy,s=0,d=Object(i["w"])(!1);f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(e){a.value=e.data,o=e.data})).catch((function(e){return alert(e)}));var b=function(){s+=20,f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(e){e.data&&(e.data.length<20&&(d.value=!0),a.value=a.value.concat(e.data))})).catch((function(e){return alert(e)}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!l.value&&!e)return a.value=o;f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(e){e.data&&(e.data.length<20&&(d.value=!0),a.value=e.data)})).catch((function(e){return alert(e)}))},O=function(e){setTimeout((function(){b(),e.target.complete()}),500)},p=function(e){f["a"].show(e).then((function(e){n("openCafeModal",e.data)}))};return Object(i["G"])(l,(function(){d.value=!1,s=0,h(),n("scrollToTop")})),Object(i["G"])(u,(function(){d.value=!1,s=0,h(!0),n("scrollToTop")})),{cafes:a,isInfiniteScrollDisabled:d,openCafeModal:p,loadMoreCafes:b,loadData:O}}});O.render=d;var p=O,v=n("58bd"),j=n("ff79"),g=Object(i["i"])({name:"Search",components:{IonContent:r["f"],IonPage:r["s"],IonModal:r["r"],UserHeader:u["a"],SlidingFilter:s["a"],InfiniteScroll:p,ShortCafeModal:v["a"]},ionViewWillEnter:function(){(this.$route.query.searchTerm||""===this.$route.query.searchTerm)&&(this.cafeSearchString=this.$route.query.searchTerm,this.$router.push({path:"search",query:{}}))},ionViewWillLeave:function(){document.querySelector("ion-searchbar div input").value=null,this.cafeSearchString=""},setup:function(){var e=Object(i["w"])(null),t=Object(i["w"])(""),n=Object(i["w"])(""),a=Object(i["w"])(0),o=Object(i["w"])(!1),c=Object(i["w"])({}),r=function(e){t.value=e},u=function(e){n.value=e},s=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(n=e.value)||void 0===n?void 0:n.$el.getScrollElement();case 2:i=t.sent,i.scrollTop>a.value?document.querySelector("#header").classList.add("hide-header"):document.querySelector("#header").classList.remove("hide-header"),a.value=i.scrollTop;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;e&&(c.value=e),o.value=t},f=function(){var e=document.querySelector(".custom-modal > .modal-wrapper");e.style.height=0},b=function(){var t;null===(t=e.value)||void 0===t||t.$el.scrollToTop(500)};return{cafeSearchString:t,sortBy:n,content:e,isModalOpen:o,modalCafe:c,searchFilterChanged:r,sortHasChanged:u,pullAnimation:s,openModal:d,hideModal:f,scrollToTop:b,notificationsOffOutline:j["B"]}}});n("9e76");g.render=c,g.__scopeId="data-v-df06d4da";t["default"]=g},"2b9d":function(e,t,n){},4359:function(e,t,n){},"9e76":function(e,t,n){"use strict";n("4359")},"9ef8":function(e,t,n){"use strict";var i=n("7a23"),a=Object(i["L"])("data-v-36e603de");Object(i["u"])("data-v-36e603de");var o={class:"px-4 py-3"},c={key:0,class:"sliding-filter-title uppercase"},l=Object(i["g"])(" Najblizi vama "),r=Object(i["g"])(" SLOBODNI "),u=Object(i["g"])(" HRANA "),s=Object(i["g"])(" POPULARNO ");Object(i["s"])();var d=a((function(e,t,n,d,f,b){var h=Object(i["z"])("ion-icon"),O=Object(i["z"])("ion-button"),p=Object(i["z"])("ion-slide"),v=Object(i["z"])("ion-slides");return Object(i["r"])(),Object(i["e"])("div",o,[e.hasTitle?(Object(i["r"])(),Object(i["e"])("p",c,"FILTERI")):Object(i["f"])("",!0),Object(i["h"])(v,{options:e.slideOpts},{default:a((function(){return[Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-32 uppercase",""===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"closest",onClick:e.sortButtonActivated},{default:a((function(){return[l,Object(i["h"])(h,{slot:"start",icon:e.locationOutline},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-28 uppercase","free"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"free",onClick:e.sortButtonActivated},{default:a((function(){return[r,Object(i["h"])(h,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-20 uppercase","food"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"id",onClick:e.sortButtonActivated},{default:a((function(){return[u,Object(i["h"])(h,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-28 uppercase","popular"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"popular",onClick:e.sortButtonActivated},{default:a((function(){return[s,Object(i["h"])(h,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1})]})),_:1},8,["options"])])})),f=n("d867"),b=n("ff79"),h=Object(i["i"])({name:"SlidingFilter",components:{IonIcon:f["i"],IonButton:f["b"],IonSlides:f["A"],IonSlide:f["z"]},props:{hasTitle:Boolean},emits:["sortHasChanged"],setup:function(e,t){var n=t.emit,a=Object(i["w"])(""),o={initialSlide:0,speed:500,centeredSlides:!1,slidesPerView:2.3};Object(i["p"])((function(){var e=document.querySelector("ion-slides");Object(i["m"])((function(){e.options=o}))}));var c=function(e){a.value=e.target.dataset.slidingFilter,n("sortHasChanged",a.value)};return{activeSlidingButton:a,slideOpts:o,sortButtonActivated:c,locationOutline:b["r"],pieChart:b["F"]}}});n("ab52");h.render=d,h.__scopeId="data-v-36e603de";t["a"]=h},ab52:function(e,t,n){"use strict";n("2b9d")}}]);
//# sourceMappingURL=Search.3c06ff36.js.map