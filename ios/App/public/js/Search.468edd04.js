(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"0cab":function(t,e,n){"use strict";n.r(e);var i=n("7a23"),a=Object(i["L"])("data-v-6790f1b2");Object(i["u"])("data-v-6790f1b2");var o={id:"header",class:"pull-transition"};Object(i["s"])();var c=a((function(t,e,n,c,l,r){var u=Object(i["z"])("SlidingFilter"),s=Object(i["z"])("UserHeader"),d=Object(i["z"])("InfiniteScroll"),f=Object(i["z"])("ShortCafeModal"),b=Object(i["z"])("ion-modal"),h=Object(i["z"])("ion-content"),O=Object(i["z"])("ion-page");return Object(i["r"])(),Object(i["e"])(O,null,{default:a((function(){return[Object(i["h"])("div",o,[Object(i["h"])(s,{hasSearchFilter:!1,mainHeading:"Pretraga",notificationIcon:t.notificationsOffOutline,searchTerm:t.cafeSearchString,onSearchFilterChanged:t.searchFilterChanged},{default:a((function(){return[Object(i["h"])(u,{hasTitle:!0,onSortHasChanged:t.sortHasChanged},null,8,["onSortHasChanged"])]})),_:1},8,["notificationIcon","searchTerm","onSearchFilterChanged"])]),Object(i["h"])(h,{ref:"content","scroll-events":!0,onIonScroll:e[4]||(e[4]=function(e){return t.pullAnimation()}),class:"ion-padding"},{default:a((function(){return[Object(i["h"])(d,{cafeSearchString:t.cafeSearchString,sortBy:t.sortBy,onScrollToTop:t.scrollToTop,onOpenCafeModal:e[1]||(e[1]=function(e){return t.openModal(e,!0)})},null,8,["cafeSearchString","sortBy","onScrollToTop"]),Object(i["h"])(b,{"is-open":t.isModalOpen,"css-class":"custom-modal",onDidDismiss:e[3]||(e[3]=function(e){t.openModal(!1)}),"backdrop-dismiss":!0,"swipe-to-close":!0},{default:a((function(){return[Object(i["h"])(f,{cafe:t.modalCafe,onDismissShortCafeModal:e[2]||(e[2]=function(e){return t.openModal(!1)}),onSubModalOpened:t.hideModal},null,8,["cafe","onSubModalOpened"])]})),_:1},8,["is-open"])]})),_:1},512)]})),_:1})})),l=n("1da1"),r=(n("96cf"),n("d867")),u=n("1990"),s=n("9ef8");function d(t,e,n,a,o,c){var l=Object(i["z"])("FilterCategoryHeading"),r=Object(i["z"])("CafeCard"),u=Object(i["z"])("ion-infinite-scroll-content"),s=Object(i["z"])("ion-infinite-scroll");return Object(i["r"])(),Object(i["e"])(i["a"],null,[Object(i["h"])("div",null,[Object(i["h"])(l,{class:"mb-2"}),(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(t.cafes,(function(e){return Object(i["r"])(),Object(i["e"])("div",{key:e.id,class:"mb-5"},[Object(i["h"])(r,{cafe:e,onClick:function(n){return t.openCafeModal(e.id)}},null,8,["cafe","onClick"])])})),128))]),Object(i["h"])(s,{onIonInfinite:e[1]||(e[1]=function(e){return t.loadData(e)}),threshold:"100px",id:"infinite-scroll",disabled:t.isInfiniteScrollDisabled},{default:Object(i["H"])((function(){return[Object(i["h"])(u,{class:"mt-6","loading-spinner":"lines","loading-text":"Ucitavanje rezultata..."})]})),_:1},8,["disabled"])],64)}n("99af");var f=n("5aaa"),b=n("0f94"),h=n("8a67"),O=Object(i["i"])({name:"InfiniteScroll",components:{IonInfiniteScroll:r["j"],IonInfiniteScrollContent:r["k"],FilterCategoryHeading:b["a"],CafeCard:h["a"]},props:{cafeSearchString:{type:String,default:""},sortBy:{type:String,default:""}},emits:["scrollToTop","openCafeModal"],setup:function(t,e){var n=e.emit,a=Object(i["w"])([]),o=null,c=Object(i["D"])(t),l=c.cafeSearchString,r=Object(i["D"])(t),u=r.sortBy,s=0,d=Object(i["w"])(!1);f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(t){a.value=t.data,o=t.data})).catch((function(t){return alert(t)}));var b=function(){s+=20,f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(t){t.data&&(t.data.length<20&&(d.value=!0),a.value=a.value.concat(t.data))})).catch((function(t){return alert(t)}))},h=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!l.value&&!t)return a.value=o;f["a"].getCafeCardsChunkInfo(s,20,l.value,u.value).then((function(t){t.data&&(t.data.length<20&&(d.value=!0),a.value=t.data)})).catch((function(t){return alert(t)}))},O=function(t){setTimeout((function(){b(),t.target.complete()}),500)},p=function(t){f["a"].show(t).then((function(t){n("openCafeModal",t.data)}))};return Object(i["G"])(l,(function(){d.value=!1,s=0,h(),n("scrollToTop")})),Object(i["G"])(u,(function(){d.value=!1,s=0,h(!0),n("scrollToTop")})),{cafes:a,isInfiniteScrollDisabled:d,openCafeModal:p,loadMoreCafes:b,loadData:O}}});O.render=d;var p=O,v=n("58bd"),j=n("ff79"),g=Object(i["i"])({name:"Search",components:{IonContent:r["f"],IonPage:r["s"],IonModal:r["r"],UserHeader:u["a"],SlidingFilter:s["a"],InfiniteScroll:p,ShortCafeModal:v["a"]},ionViewWillEnter:function(){(this.$route.query.searchTerm||""===this.$route.query.searchTerm)&&(this.cafeSearchString=this.$route.query.searchTerm,this.$router.push({path:"search",query:{}}))},ionViewWillLeave:function(){document.querySelector("ion-searchbar div input").value=null,this.cafeSearchString=""},setup:function(){var t=Object(i["w"])(null),e=Object(i["w"])(""),n=Object(i["w"])(""),a=Object(i["w"])(0),o=Object(i["w"])(!1),c=Object(i["w"])({}),r=function(t){e.value=t},u=function(t){n.value=t},s=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.value)||void 0===n?void 0:n.$el.getScrollElement();case 2:i=e.sent,i.scrollTop>a.value?document.querySelector("#header").classList.add("hide-header"):document.querySelector("#header").classList.remove("hide-header"),a.value=i.scrollTop;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;t&&(c.value=t),o.value=e},f=function(){var t=document.querySelector(".custom-modal > .modal-wrapper");t.style.height=0},b=function(){var e;null===(e=t.value)||void 0===e||e.$el.scrollToTop(500)};return{cafeSearchString:e,sortBy:n,content:t,isModalOpen:o,modalCafe:c,searchFilterChanged:r,sortHasChanged:u,pullAnimation:s,openModal:d,hideModal:f,scrollToTop:b,notificationsOffOutline:j["B"]}}});n("aa4a");g.render=c,g.__scopeId="data-v-6790f1b2";e["default"]=g},"2b9d":function(t,e,n){},7714:function(t,e,n){},"9ef8":function(t,e,n){"use strict";var i=n("7a23"),a=Object(i["L"])("data-v-36e603de");Object(i["u"])("data-v-36e603de");var o={class:"px-4 py-3"},c={key:0,class:"sliding-filter-title uppercase"},l=Object(i["g"])(" Najblizi vama "),r=Object(i["g"])(" SLOBODNI "),u=Object(i["g"])(" HRANA "),s=Object(i["g"])(" POPULARNO ");Object(i["s"])();var d=a((function(t,e,n,d,f,b){var h=Object(i["z"])("ion-icon"),O=Object(i["z"])("ion-button"),p=Object(i["z"])("ion-slide"),v=Object(i["z"])("ion-slides");return Object(i["r"])(),Object(i["e"])("div",o,[t.hasTitle?(Object(i["r"])(),Object(i["e"])("p",c,"FILTERI")):Object(i["f"])("",!0),Object(i["h"])(v,{options:t.slideOpts},{default:a((function(){return[Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-32 uppercase",""===t.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"closest",onClick:t.sortButtonActivated},{default:a((function(){return[l,Object(i["h"])(h,{slot:"start",icon:t.locationOutline},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-28 uppercase","free"===t.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"free",onClick:t.sortButtonActivated},{default:a((function(){return[r,Object(i["h"])(h,{slot:"start",icon:t.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-20 uppercase","food"===t.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"id",onClick:t.sortButtonActivated},{default:a((function(){return[u,Object(i["h"])(h,{slot:"start",icon:t.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(i["h"])(p,null,{default:a((function(){return[Object(i["h"])(O,{class:["sliding-filter-button sliding-filter-button-text h-9 w-28 uppercase","popular"===t.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"popular",onClick:t.sortButtonActivated},{default:a((function(){return[s,Object(i["h"])(h,{slot:"start",icon:t.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1})]})),_:1},8,["options"])])})),f=n("d867"),b=n("ff79"),h=Object(i["i"])({name:"SlidingFilter",components:{IonIcon:f["i"],IonButton:f["b"],IonSlides:f["A"],IonSlide:f["z"]},props:{hasTitle:Boolean},emits:["sortHasChanged"],setup:function(t,e){var n=e.emit,a=Object(i["w"])(""),o={initialSlide:0,speed:500,centeredSlides:!1,slidesPerView:2.3};Object(i["p"])((function(){var t=document.querySelector("ion-slides");Object(i["m"])((function(){t.options=o}))}));var c=function(t){a.value=t.target.dataset.slidingFilter,n("sortHasChanged",a.value)};return{activeSlidingButton:a,slideOpts:o,sortButtonActivated:c,locationOutline:b["r"],pieChart:b["F"]}}});n("ab52");h.render=d,h.__scopeId="data-v-36e603de";e["a"]=h},aa4a:function(t,e,n){"use strict";n("7714")},ab52:function(t,e,n){"use strict";n("2b9d")}}]);
//# sourceMappingURL=Search.468edd04.js.map