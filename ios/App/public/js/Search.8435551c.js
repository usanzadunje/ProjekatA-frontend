(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"0963":function(e,t,n){"use strict";n("ffec")},"0cab":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=Object(a["L"])("data-v-6790f1b2");Object(a["u"])("data-v-6790f1b2");var i={id:"header",class:"pull-transition"};Object(a["s"])();var o=c((function(e,t,n,o,l,r){var s=Object(a["z"])("SlidingFilter"),u=Object(a["z"])("UserHeader"),d=Object(a["z"])("InfiniteScroll"),f=Object(a["z"])("ShortCafeModal"),b=Object(a["z"])("ion-modal"),O=Object(a["z"])("ion-content"),h=Object(a["z"])("ion-page");return Object(a["r"])(),Object(a["e"])(h,null,{default:c((function(){return[Object(a["h"])("div",i,[Object(a["h"])(u,{hasSearchFilter:!1,mainHeading:"Pretraga",notificationIcon:e.notificationsOffOutline,searchTerm:e.cafeSearchString,onSearchFilterChanged:e.searchFilterChanged},{default:c((function(){return[Object(a["h"])(s,{hasTitle:!0,onSortHasChanged:e.sortHasChanged},null,8,["onSortHasChanged"])]})),_:1},8,["notificationIcon","searchTerm","onSearchFilterChanged"])]),Object(a["h"])(O,{ref:"content","scroll-events":!0,onIonScroll:t[4]||(t[4]=function(t){return e.pullAnimation()}),class:"ion-padding"},{default:c((function(){return[Object(a["h"])(d,{cafeSearchString:e.cafeSearchString,sortBy:e.sortBy,onScrollToTop:e.scrollToTop,onOpenCafeModal:t[1]||(t[1]=function(t){return e.openModal(t,!0)})},null,8,["cafeSearchString","sortBy","onScrollToTop"]),Object(a["h"])(b,{"is-open":e.isModalOpen,"css-class":"custom-modal",onDidDismiss:t[3]||(t[3]=function(t){e.openModal(!1)}),"backdrop-dismiss":!0,"swipe-to-close":!0},{default:c((function(){return[Object(a["h"])(f,{cafe:e.modalCafe,onDismissShortCafeModal:t[2]||(t[2]=function(t){return e.openModal(!1)}),onSubModalOpened:e.hideModal},null,8,["cafe","onSubModalOpened"])]})),_:1},8,["is-open"])]})),_:1},512)]})),_:1})})),l=n("1da1"),r=(n("96cf"),n("d867")),s=n("1990"),u=n("9ef8");function d(e,t,n,c,i,o){var l=Object(a["z"])("FilterCategoryHeading"),r=Object(a["z"])("CafeCard"),s=Object(a["z"])("ion-infinite-scroll-content"),u=Object(a["z"])("ion-infinite-scroll");return Object(a["r"])(),Object(a["e"])(a["a"],null,[Object(a["h"])("div",null,[Object(a["h"])(l,{class:"mb-2"}),(Object(a["r"])(!0),Object(a["e"])(a["a"],null,Object(a["x"])(e.cafes,(function(t){return Object(a["r"])(),Object(a["e"])("div",{key:t.id,class:"mb-5"},[Object(a["h"])(r,{cafe:t,onClick:function(n){return e.openCafeModal(t.id)}},null,8,["cafe","onClick"])])})),128))]),Object(a["h"])(u,{onIonInfinite:t[1]||(t[1]=function(t){return e.loadData(t)}),threshold:"100px",id:"infinite-scroll",disabled:e.isInfiniteScrollDisabled},{default:Object(a["H"])((function(){return[Object(a["h"])(s,{class:"mt-6","loading-spinner":"lines","loading-text":"Ucitavanje rezultata..."})]})),_:1},8,["disabled"])],64)}n("99af");var f=n("5aaa"),b=n("0f94"),O=n("8a67"),h=Object(a["i"])({name:"InfiniteScroll",components:{IonInfiniteScroll:r["j"],IonInfiniteScrollContent:r["k"],FilterCategoryHeading:b["a"],CafeCard:O["a"]},props:{cafeSearchString:{type:String,default:""},sortBy:{type:String,default:""}},emits:["scrollToTop","openCafeModal"],setup:function(e,t){var n=t.emit,c=Object(a["w"])([]),i=null,o=Object(a["D"])(e),l=o.cafeSearchString,r=Object(a["D"])(e),s=r.sortBy,u=0,d=Object(a["w"])(!1);f["a"].getCafeCardsChunkInfo(u,20,l.value,s.value).then((function(e){c.value=e.data,i=e.data})).catch((function(e){return alert(e)}));var b=function(){u+=20,f["a"].getCafeCardsChunkInfo(u,20,l.value,s.value).then((function(e){e.data&&(e.data.length<20&&(d.value=!0),c.value=c.value.concat(e.data))})).catch((function(e){return alert(e)}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!l.value&&!e)return c.value=i;f["a"].getCafeCardsChunkInfo(u,20,l.value,s.value).then((function(e){e.data&&(e.data.length<20&&(d.value=!0),c.value=e.data)})).catch((function(e){return alert(e)}))},h=function(e){setTimeout((function(){b(),e.target.complete()}),500)},j=function(e){f["a"].show(e).then((function(e){n("openCafeModal",e.data)}))};return Object(a["G"])(l,(function(){d.value=!1,u=0,O(),n("scrollToTop")})),Object(a["G"])(s,(function(){d.value=!1,u=0,O(!0),n("scrollToTop")})),{cafes:c,isInfiniteScrollDisabled:d,openCafeModal:j,loadMoreCafes:b,loadData:h}}});h.render=d;var j=h,p=n("58bd"),v=n("ff79"),g=Object(a["i"])({name:"Search",components:{IonContent:r["f"],IonPage:r["s"],IonModal:r["r"],UserHeader:s["a"],SlidingFilter:u["a"],InfiniteScroll:j,ShortCafeModal:p["a"]},ionViewWillEnter:function(){(this.$route.query.searchTerm||""===this.$route.query.searchTerm)&&(this.cafeSearchString=this.$route.query.searchTerm,this.$router.push({path:"search",query:{}}))},ionViewWillLeave:function(){document.querySelector("ion-searchbar div input").value=null,this.cafeSearchString=""},setup:function(){var e=Object(a["w"])(null),t=Object(a["w"])(""),n=Object(a["w"])(""),c=Object(a["w"])(0),i=Object(a["w"])(!1),o=Object(a["w"])({}),r=function(e){t.value=e},s=function(e){n.value=e},u=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(n=e.value)||void 0===n?void 0:n.$el.getScrollElement();case 2:a=t.sent,a.scrollTop>c.value?document.querySelector("#header").classList.add("hide-header"):document.querySelector("#header").classList.remove("hide-header"),c.value=a.scrollTop;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;e&&(o.value=e),i.value=t},f=function(){var e=document.querySelector(".custom-modal > .modal-wrapper");e.style.height=0},b=function(){var t;null===(t=e.value)||void 0===t||t.$el.scrollToTop(500)};return{cafeSearchString:t,sortBy:n,content:e,isModalOpen:i,modalCafe:o,searchFilterChanged:r,sortHasChanged:s,pullAnimation:u,openModal:d,hideModal:f,scrollToTop:b,notificationsOffOutline:v["z"]}}});n("aa4a");g.render=o,g.__scopeId="data-v-6790f1b2";t["default"]=g},1990:function(e,t,n){"use strict";var a=n("7a23"),c=Object(a["L"])("data-v-5c6e40a4");Object(a["u"])("data-v-5c6e40a4");var i={class:"px-4 pt-3 pb-1 pb-2 mt-2 md header-padding-bottom"},o={class:"flex justify-between"},l={class:"main-toolbar-fade-text"},r={class:"flex justify-around"},s=Object(a["h"])("p",{class:"main-toolbar-fade-text uppercase"},"Login",-1),u=Object(a["h"])("p",{class:"main-toolbar-fade-text uppercase"},"Register",-1),d={class:"main-toolbar-heading text-xl"},f={class:"flex"};Object(a["s"])();var b=c((function(e,t,n,b,O,h){var j=Object(a["z"])("ion-icon"),p=Object(a["z"])("ion-button"),v=Object(a["z"])("ion-searchbar"),g=Object(a["z"])("ion-toolbar"),m=Object(a["z"])("ion-header");return Object(a["r"])(),Object(a["e"])(m,{class:"ion-no-border"},{default:c((function(){return[Object(a["h"])(g,null,{default:c((function(){return[Object(a["h"])("div",i,[Object(a["I"])(Object(a["h"])("div",o,[Object(a["h"])("p",l,"Cao "+Object(a["B"])(e.authUser.full_name)+"!",1),Object(a["h"])(p,{fill:"clear",href:"/"},{default:c((function(){return[Object(a["h"])(j,{icon:e.notificationIcon,class:"text-2xl text-gray-400"},null,8,["icon"])]})),_:1})],512),[[a["F"],e.loggedIn]]),Object(a["I"])(Object(a["h"])("div",r,[Object(a["h"])(p,{fill:"clear",href:"/login"},{default:c((function(){return[s]})),_:1}),Object(a["h"])(p,{fill:"clear",href:"/register"},{default:c((function(){return[u]})),_:1})],512),[[a["F"],!e.loggedIn]]),Object(a["h"])("h1",d,Object(a["B"])(e.mainHeading),1),Object(a["h"])("div",f,[Object(a["h"])(v,{value:e.searchTerm,placeholder:"Unesite ime kafica",onIonChange:e.searchInputChanged,onKeyup:t[1]||(t[1]=Object(a["J"])((function(t){return e.$emit("searchEnterPressed",t)}),["enter"])),enterkeyhint:"search"},null,8,["value","onIonChange"]),e.hasSearchFilter?(Object(a["r"])(),Object(a["e"])(j,{key:0,icon:e.optionsOutline,class:"text-3xl text-gray-400 align-bottom mt-1 md filter-icon"},null,8,["icon"])):Object(a["f"])("",!0)]),Object(a["y"])(e.$slots,"default",{},void 0,!0)])]})),_:3})]})),_:1})})),O=n("5530"),h=n("5502"),j=n("d867"),p=n("ff79"),v=Object(a["i"])({name:"UserHeader",components:{IonIcon:j["i"],IonSearchbar:j["y"],IonHeader:j["h"],IonToolbar:j["I"],IonButton:j["b"]},props:{hasSearchFilter:Boolean,mainHeading:String,notificationIcon:String,searchTerm:String},computed:Object(O["a"])({},Object(h["b"])("auth",["authUser","loggedIn"])),emits:["searchFilterChanged","searchEnterPressed"],setup:function(e,t){var n=t.emit,a=function(e){n("searchFilterChanged",e.target.value)};return{searchInputChanged:a,optionsOutline:p["B"]}}});n("0963");v.render=b,v.__scopeId="data-v-5c6e40a4";t["a"]=v},"4ed2":function(e,t,n){"use strict";n("ac12")},"58bd":function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),c=Object(a["L"])("data-v-b986922c");Object(a["u"])("data-v-b986922c");var i={class:"relative w-full container-modal"},o={class:"absolute w-full top-3"},l=Object(a["h"])("img",{src:"http://192.168.1.203:8200/storage/img/cafe/test.png",alt:"Logo of {{ cafe.name }}",class:"modal-thumbnail"},null,-1),r={class:"modal-cafe-name-text"},s=Object(a["h"])("p",{class:"modal-cafe-offers"},"Kafic, hrana, basta...",-1),u={class:"mt-5 mb-3 flex justify-between"},d=Object(a["g"])(" Pogledaj vise ");Object(a["s"])();var f=c((function(e,t,n,f,b,O){var h=Object(a["z"])("ion-thumbnail"),j=Object(a["z"])("ion-item"),p=Object(a["z"])("CafeInfoBody"),v=Object(a["z"])("ion-slide"),g=Object(a["z"])("ion-slides"),m=Object(a["z"])("ion-button"),S=Object(a["z"])("ion-icon"),C=Object(a["z"])("CafeSubscriptionModal"),I=Object(a["z"])("ion-modal"),y=Object(a["z"])("ion-content");return Object(a["r"])(),Object(a["e"])(y,{class:"ion-padding"},{default:c((function(){return[Object(a["h"])("div",i,[Object(a["h"])("div",o,[Object(a["h"])(j,{class:"ion-item-no-padding-x"},{default:c((function(){return[Object(a["h"])(h,{slot:"start"},{default:c((function(){return[l]})),_:1}),Object(a["h"])("div",null,[Object(a["h"])("h1",r,Object(a["B"])(e.cafe.name),1),s])]})),_:1}),Object(a["h"])(p,{cafe:e.cafe},null,8,["cafe"]),Object(a["h"])(j,{class:"mt-6 ion-no-padding"},{default:c((function(){return[Object(a["h"])(g,{ref:"slider",options:e.slideOpts},{default:c((function(){return[(Object(a["r"])(),Object(a["e"])(a["a"],null,Object(a["x"])([1,2,3],(function(e){return Object(a["h"])(v,{key:e},{default:c((function(){return[Object(a["h"])("img",{src:"http://192.168.1.203:8200/storage/img/cafe/test".concat(e,".png"),alt:""},null,8,["src"])]})),_:2},1024)})),64))]})),_:1},8,["options"])]})),_:1}),Object(a["h"])("div",u,[Object(a["h"])(m,{class:"uppercase button-see-more modal-button-border",href:"/cafes/".concat(e.cafe.id),onClick:t[1]||(t[1]=function(t){return e.$emit("dismissShortCafeModal")})},{default:c((function(){return[d]})),_:1},8,["href"]),Object(a["h"])(m,{class:"uppercase button-subscribe modal-button-border",onClick:t[2]||(t[2]=function(t){e.openModal(!0),e.$emit("subModalOpened")}),disabled:!e.loggedIn},{default:c((function(){return[Object(a["h"])(S,{slot:"start",icon:e.isUserSubscribed?e.notifications:e.notificationsOutline},null,8,["icon"]),Object(a["g"])(" "+Object(a["B"])(e.isUserSubscribed?"Pretplacen":"Pretplati se"),1)]})),_:1},8,["disabled"])])])]),Object(a["h"])(I,{"is-open":e.isModalOpen,"css-class":"custom-sub-modal",onDidDismiss:t[5]||(t[5]=function(t){e.openModal(!1),e.$emit("dismissShortCafeModal")}),"backdrop-dismiss":!0,"swipe-to-close":!0},{default:c((function(){return[Object(a["h"])(C,{cafe:{id:e.cafe.id,name:e.cafe.name},isUserSubscribed:e.isUserSubscribed,onDismissSubscriptionModal:t[3]||(t[3]=function(t){e.openModal(!1),e.$emit("dismissShortCafeModal")}),onUserToggledSubscription:t[4]||(t[4]=function(t){return e.isUserSubscribed=!e.isUserSubscribed})},null,8,["cafe","isUserSubscribed"])]})),_:1},8,["is-open"])]})),_:1})})),b=n("5502"),O=n("d867"),h=n("5aaa"),j=n("5a09"),p=n("8591"),v=n("ff79"),g=Object(a["i"])({name:"ShortCafeModal",components:{IonContent:O["f"],IonThumbnail:O["F"],IonItem:O["m"],IonIcon:O["i"],IonButton:O["b"],IonSlides:O["A"],IonSlide:O["z"],IonModal:O["r"],CafeSubscriptionModal:p["a"],CafeInfoBody:j["a"]},props:{cafe:{type:Object,default:null}},emits:["dismissShortCafeModal","subModalOpened"],updated:function(){var e=this,t=document.querySelector("ion-slides");this.$nextTick((function(){t.options=e.slideOpts}))},setup:function(e){var t=Object(b["c"])(),n={initialSlide:0,speed:500,slidesPerView:2.2},c=Object(a["w"])(!1),i=Object(a["w"])(!1),o=Object(a["C"])(e,"cafe"),l=Object(a["c"])((function(){return t.getters["auth/loggedIn"]}));l.value&&h["a"].isUserSubscribed(o.value.id).then((function(e){i.value=!!e.data})).catch((function(e){return alert(e)}));var r=function(e){c.value=e};return{slideOpts:n,isModalOpen:c,isUserSubscribed:i,loggedIn:l,openModal:r,notifications:v["y"],notificationsOutline:v["A"]}}});g.render=f,g.__scopeId="data-v-b986922c";t["a"]=g},"61fd":function(e,t,n){},"6d83":function(e,t,n){"use strict";n("61fd")},7714:function(e,t,n){},"8a67":function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),c=Object(a["L"])("data-v-2818ac66");Object(a["u"])("data-v-2818ac66");var i={class:"bg-white cafe-card-border-radius"},o={class:"p-4 flex ion-align-items-center"},l=Object(a["h"])("img",{src:"http://192.168.1.203:8200/storage/img/cafe/test.png",alt:"",class:"cafe-card-image"},null,-1),r={class:"ml-3.5"},s={class:"cafe-card-name"},u=Object(a["h"])("p",{class:"cafe-card-fade-text"},"Kafic, hrana, basta ...",-1),d=Object(a["h"])("hr",{class:"card-horizontal-ruler"},null,-1),f={class:"px-3 pt-3 pb-2.5 flex justify-between"},b={class:"flex"},O={class:"flex"},h={class:"cafe-card-fade-text ml-1"},j={class:"flex ml-2"},p=Object(a["h"])("span",{class:"cafe-card-fade-text ml-1"},"600m",-1),v={class:"flex"};Object(a["s"])();var g=c((function(e,t,n,c,g,m){var S=Object(a["z"])("ion-icon");return Object(a["r"])(),Object(a["e"])("div",i,[Object(a["h"])("div",o,[l,Object(a["h"])("div",r,[Object(a["h"])("h2",s,Object(a["B"])(e.cafe.name),1),u])]),d,Object(a["h"])("div",f,[Object(a["h"])("div",b,[Object(a["h"])("div",O,[Object(a["h"])(S,{icon:e.pieChart,class:"text-yellow-400"},null,8,["icon"]),Object(a["h"])("span",h,Object(a["B"])(e.cafe.taken_capacity),1)]),Object(a["h"])("div",j,[Object(a["h"])(S,{icon:e.locationOutline,class:"text-gray-400"},null,8,["icon"]),p])]),Object(a["h"])("div",v,[Object(a["h"])(S,{icon:e.fastFoodOutline},null,8,["icon"]),Object(a["h"])(S,{icon:e.leafOutline,class:"ml-1"},null,8,["icon"])])])])})),m=n("d867"),S=n("ff79"),C=Object(a["i"])({name:"CafeCard",components:{IonIcon:m["i"]},props:{cafe:{type:Object,default:null}},setup:function(){return{locationOutline:S["r"],pieChart:S["D"],fastFoodOutline:S["n"],leafOutline:S["q"]}}});n("4ed2");C.render=g,C.__scopeId="data-v-2818ac66";t["a"]=C},"9ef8":function(e,t,n){"use strict";var a=n("7a23"),c=Object(a["L"])("data-v-0e795e04");Object(a["u"])("data-v-0e795e04");var i={class:"mt-1"},o={key:0,class:"sliding-filter-title uppercase"},l=Object(a["g"])(" Najblizi vama "),r=Object(a["g"])(" SLOBODNI "),s=Object(a["g"])(" HRANA "),u=Object(a["g"])(" POPULARNO ");Object(a["s"])();var d=c((function(e,t,n,d,f,b){var O=Object(a["z"])("ion-icon"),h=Object(a["z"])("ion-button"),j=Object(a["z"])("ion-slide"),p=Object(a["z"])("ion-slides");return Object(a["r"])(),Object(a["e"])("div",i,[e.hasTitle?(Object(a["r"])(),Object(a["e"])("p",o,"FILTERI")):Object(a["f"])("",!0),Object(a["h"])(p,{options:e.slideOpts},{default:c((function(){return[Object(a["h"])(j,null,{default:c((function(){return[Object(a["h"])(h,{class:["sliding-filter-button sliding-filter-button-text uppercase","id"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"id",onClick:e.sortButtonActivated},{default:c((function(){return[l,Object(a["h"])(O,{slot:"start",icon:e.locationOutline},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(a["h"])(j,null,{default:c((function(){return[Object(a["h"])(h,{class:["sliding-filter-button sliding-filter-button-text uppercase","free"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"free",onClick:e.sortButtonActivated},{default:c((function(){return[r,Object(a["h"])(O,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(a["h"])(j,null,{default:c((function(){return[Object(a["h"])(h,{class:["sliding-filter-button sliding-filter-button-text uppercase","food"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"food",onClick:e.sortButtonActivated},{default:c((function(){return[s,Object(a["h"])(O,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1}),Object(a["h"])(j,null,{default:c((function(){return[Object(a["h"])(h,{class:["sliding-filter-button sliding-filter-button-text uppercase","popular"===e.activeSlidingButton?"sliding-filter-button-active":"sliding-filter-button-inactive"],"data-sliding-filter":"popular",onClick:e.sortButtonActivated},{default:c((function(){return[u,Object(a["h"])(O,{slot:"start",icon:e.pieChart},null,8,["icon"])]})),_:1},8,["class","onClick"])]})),_:1})]})),_:1},8,["options"])])})),f=n("d867"),b=n("ff79"),O=Object(a["i"])({name:"SlidingFilter",components:{IonIcon:f["i"],IonButton:f["b"],IonSlides:f["A"],IonSlide:f["z"]},props:{hasTitle:Boolean},emits:["sortHasChanged"],setup:function(e,t){var n=t.emit,c=Object(a["w"])("id"),i={initialSlide:0,speed:500,centeredSlides:!1,slidesPerView:2.3};Object(a["p"])((function(){var e=document.querySelector("ion-slides");Object(a["m"])((function(){e.options=i}))}));var o=function(e){c.value=e.target.dataset.slidingFilter,n("sortHasChanged",c.value)};return{activeSlidingButton:c,slideOpts:i,sortButtonActivated:o,locationOutline:b["r"],pieChart:b["D"]}}});n("6d83");O.render=d,O.__scopeId="data-v-0e795e04";t["a"]=O},aa4a:function(e,t,n){"use strict";n("7714")},ac12:function(e,t,n){},ffec:function(e,t,n){}}]);
//# sourceMappingURL=Search.8435551c.js.map